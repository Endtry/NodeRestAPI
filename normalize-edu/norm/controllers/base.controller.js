var _0x6072=['send','notifyRequest','session','user','getToken','length','toPromise','getRequestUser','exec','message','expiredAt','json','dbType','secretFields','getAllSecretFields','reqUser','toLowerCase','body','map','created_by','getTouchByUser','method','updated_by','post','insert','put','setTouchByUser','update','sendError','request\x20failed','No\x20token\x20was\x20sent\x20with\x20the\x20request!','Session\x20does\x20not\x20exist\x20or\x20has\x20expired!\x20Please\x20login\x20to\x20establish\x20a\x20session!','findByIdInterceptor','mongo','findById','postgres','psql','schema','schemaInsertPayload','createTable','sendAsPromise','create\x20table\x20success','create\x20table\x20failed!\x20No\x20schema\x20or\x20schema\x20insert\x20payload','getAll','find','No\x20','\x20record\x20found\x20for\x20id\x20','params','bulkInsert','status','Coming\x20soon.','forEach','POST','create\x20failed','assign','PUT','update\x20error','remove','delete','delete\x20success','removeWhere','DELETE','updateSet','getSecretFields','Comming\x20soon.','update\x20success','unsubscribe','stopSubscription','subscription','api','getSchema','controller','subscriberID','interval','get','sess','clients','subscriptions','push','findIndex','select','subscription\x20get\x20success','getTime','poll','getTotalCount','data','count','get\x20success','get\x20total\x20count\x20success','csvExport','keys','filterID','query','rows','includes','.id','_id','slice','sort','_at','_date','ISO_8601','isValid','CSV\x20Export\x20Success','_export_','format','.csv','CSV\x20Export\x20Failed!\x20Please\x20check\x20your\x20request\x20object!','listAllTables','table','SELECT\x20t.table_name,\x20json_agg(c.*)\x20as\x20columns\x20FROM\x20information_schema.tables\x20as\x20t\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20inner\x20join\x20(select\x20table_name,\x20column_name,\x20column_default,\x20data_type\x20from\x20information_schema.columns)\x20as\x20c\x20on\x20(t.table_name\x20=\x20c.table_name)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20t.table_schema=\x27public\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20t.table_type=\x27BASE\x20TABLE\x27','\x20and\x20t.table_name\x20=\x20\x27','\x27\x20group\x20by\x20t.table_name','\x20group\x20by\x20t.table_name','No\x20tables\x20found!','listAllProps','select\x20column_name\x20from\x20information_schema.columns\x20where\x20table_name=\x27','getError','error','totalRowCount','PSQLWrapper','hash','random','toString','substring','headers','authorization','split','Bearer','token','env','JWT_SECRET','localtimestamp','username','SYS','checkForUpdates','Changelog','Session','timestamp','DESC','models','encrypt','bcrypt','indexOf','undefined','----------->\x20from\x20polling\x20','\x20------------->','client[\x27subscriptions\x27]','\x20stopped.','subscription\x20cancelled','data---->','--------->','<----------','end','removeSessClient','saveSession','unsubscribe\x20success','unsubscribe\x20error','isArray','string','JSONToRow','getJSONModels','escape','convertToUTCDate','BaseController','__awaiter','next','throw','done','value','apply','defineProperty','__esModule','../wrapper/postgres.wrapper','jsonwebtoken','moment','options','name','model','requestInterceptor','log','from\x20interceptor...process\x20pid','pid'];(function(_0x102d83,_0x20619e){var _0x49a32b=function(_0x172ec7){while(--_0x172ec7){_0x102d83['push'](_0x102d83['shift']());}};_0x49a32b(++_0x20619e);}(_0x6072,0x15c));var _0x4e0a=function(_0xbcd7f9,_0x26e403){_0xbcd7f9=_0xbcd7f9-0x0;var _0x2ed5d4=_0x6072[_0xbcd7f9];return _0x2ed5d4;};'use strict';/*
 The base controller file containing default controller methods
 */var __awaiter=this&&this[_0x4e0a('0x0')]||function(_0x509cb0,_0x2922a2,_0x29ed8e,_0x31743d){return new(_0x29ed8e||(_0x29ed8e=Promise))(function(_0x329453,_0x393ca2){function _0xcd5712(_0x3ac67a){try{_0x4acfc3(_0x31743d[_0x4e0a('0x1')](_0x3ac67a));}catch(_0x79fbfd){_0x393ca2(_0x79fbfd);}}function _0x11f0cd(_0x4cc245){try{_0x4acfc3(_0x31743d[_0x4e0a('0x2')](_0x4cc245));}catch(_0x8b48a4){_0x393ca2(_0x8b48a4);}}function _0x4acfc3(_0x348337){_0x348337[_0x4e0a('0x3')]?_0x329453(_0x348337[_0x4e0a('0x4')]):new _0x29ed8e(function(_0x329453){_0x329453(_0x348337[_0x4e0a('0x4')]);})['then'](_0xcd5712,_0x11f0cd);}_0x4acfc3((_0x31743d=_0x31743d[_0x4e0a('0x5')](_0x509cb0,_0x2922a2||[]))[_0x4e0a('0x1')]());});};Object[_0x4e0a('0x6')](exports,_0x4e0a('0x7'),{'value':!![]});const postgres_wrapper_1=require(_0x4e0a('0x8'));const jwt=require(_0x4e0a('0x9'));const moment=require(_0x4e0a('0xa'));class BaseController{constructor(_0x52bc25,_0x5f6a2f,_0x3bd80a,_0x4f83eb){this[_0x4e0a('0xb')]=_0x52bc25;this[_0x4e0a('0xc')]=_0x5f6a2f;this[_0x4e0a('0xd')]=_0x3bd80a;this['api']=_0x4f83eb;this[_0x4e0a('0xe')]=(_0x4e29ff,_0x5f4db2,_0x50438a)=>__awaiter(this,void 0x0,void 0x0,function*(){console[_0x4e0a('0xf')](_0x4e0a('0x10'),process[_0x4e0a('0x11')]);process&&process[_0x4e0a('0x12')]!=null?process['send']({'cmd':_0x4e0a('0x13'),'procId':process[_0x4e0a('0x11')]}):![];if(_0x4e29ff[_0x4e0a('0x14')][_0x4e0a('0x15')]!=null){let _0x15d62b=this[_0x4e0a('0x16')](_0x4e29ff);if(_0x15d62b&&_0x15d62b[_0x4e0a('0x17')]>0x0){let _0x35577b=yield this[_0x4e0a('0x18')](this[_0x4e0a('0x19')])[_0x4e0a('0x1a')](_0x15d62b);if(_0x35577b){if(_0x35577b[_0x4e0a('0xc')]&&_0x35577b[_0x4e0a('0x1b')]&&_0x35577b[_0x4e0a('0x1c')]){_0x5f4db2[_0x4e0a('0x1d')](this['sendError'](0x1f4,{'name':_0x35577b[_0x4e0a('0xc')],'message':_0x35577b[_0x4e0a('0x1b')],'expiredAt':_0x35577b[_0x4e0a('0x1c')]}));}else{if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]=='mongo'){}else if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]=='postgres'){_0x4e29ff[_0x4e0a('0x1f')]=this[_0x4e0a('0x20')]();_0x4e29ff[_0x4e0a('0x21')]=_0x35577b;let _0x33ca5f=_0x4e29ff['method'][_0x4e0a('0x22')]();if(_0x4e29ff[_0x4e0a('0x21')]){if(Array['isArray'](_0x4e29ff[_0x4e0a('0x23')])){_0x4e29ff[_0x4e0a('0x23')]=_0x4e29ff[_0x4e0a('0x23')][_0x4e0a('0x24')]((_0x3034a1,_0x19fd3c,_0x2d800b)=>{if(_0x4e29ff['method'][_0x4e0a('0x22')]()=='post'){_0x3034a1[_0x4e0a('0x25')]=this[_0x4e0a('0x26')](_0x4e29ff,_0x4e0a('0x25'));}else if(_0x4e29ff[_0x4e0a('0x27')]['toLowerCase']()=='put'){_0x3034a1['updated_by']=this['getTouchByUser'](_0x4e29ff,_0x4e0a('0x28'));}return _0x3034a1;});}else{if(_0x4e29ff['method'][_0x4e0a('0x22')]()==_0x4e0a('0x29')){this['setTouchByUser'](_0x4e29ff,_0x4e0a('0x2a'));}else if(_0x4e29ff[_0x4e0a('0x27')]['toLowerCase']()==_0x4e0a('0x2b')){this[_0x4e0a('0x2c')](_0x4e29ff,_0x4e0a('0x2d'));}}}_0x50438a();}}}else{_0x5f4db2['json'](this[_0x4e0a('0x2e')](0x1f4,_0x4e0a('0x2f')));}}else{_0x5f4db2[_0x4e0a('0x1d')](this['sendError'](0x193,{'message':_0x4e0a('0x30')}));}}else{_0x5f4db2[_0x4e0a('0x1d')](this[_0x4e0a('0x2e')](0x191,{'message':_0x4e0a('0x31')}));}});this[_0x4e0a('0x32')]=(_0x4515bd,_0x16b23a,_0x8300b6)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this['options'][_0x4e0a('0x1e')]==_0x4e0a('0x33')){this['model'][_0x4e0a('0x34')](_0x4515bd['params']['id'],(_0x283a92,_0x46baf4)=>{if(_0x283a92){_0x16b23a['status'](0x1f4)['send'](_0x283a92);}else if(_0x46baf4){_0x4515bd[this[_0x4e0a('0xc')]]=_0x46baf4;_0x8300b6();}else{_0x16b23a['status'](0x194)[_0x4e0a('0x12')](_0x283a92);}});}else if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]==_0x4e0a('0x35')){let _0x3b934e=yield this[_0x4e0a('0x18')](this[_0x4e0a('0x36')][_0x4e0a('0x34')],this[_0x4e0a('0x36')])['exec'](_0x4515bd,_0x16b23a,_0x8300b6);if(_0x3b934e){_0x4515bd[this['name']]=_0x3b934e;}_0x8300b6();}});this['createTable']=(_0xfa27d1,_0x21e722,_0x2fbef9)=>__awaiter(this,void 0x0,void 0x0,function*(){let _0x1c1d2a=_0xfa27d1&&_0xfa27d1[_0x4e0a('0x23')]&&_0xfa27d1['body']['schema']!=null?_0xfa27d1[_0x4e0a('0x23')][_0x4e0a('0x37')]:_0xfa27d1[_0x4e0a('0x37')]!=null?_0xfa27d1[_0x4e0a('0x37')]:![];let _0x26bc99=_0xfa27d1&&_0xfa27d1[_0x4e0a('0x23')]&&_0xfa27d1[_0x4e0a('0x23')][_0x4e0a('0x38')]!=null?_0xfa27d1[_0x4e0a('0x23')][_0x4e0a('0x38')]:_0xfa27d1[_0x4e0a('0x38')]!=null?_0xfa27d1['schemaInsertPayload']:![];if(_0x1c1d2a&&_0x26bc99){const _0x10b82c=yield this[_0x4e0a('0x18')](this[_0x4e0a('0x36')][_0x4e0a('0x39')])['exec'](_0x1c1d2a,_0x26bc99);if(_0x10b82c){if(_0x21e722==null){return this[_0x4e0a('0x3a')](0xc8,_0x10b82c);}else{_0x21e722[_0x4e0a('0x1d')](this['send'](0xc8,_0x10b82c,null,null,_0x4e0a('0x3b')));}}else{if(_0x21e722==null){return this[_0x4e0a('0x3a')](0x1f4,'create\x20table\x20failed');}_0x21e722['json'](this[_0x4e0a('0x2e')](0x1f4,'create\x20table\x20failed'));}}else{if(_0x21e722==null){return this[_0x4e0a('0x3a')](0x1f4,_0x4e0a('0x3c'));}_0x21e722[_0x4e0a('0x1d')](this[_0x4e0a('0x2e')](0x1f4,_0x4e0a('0x3c')));}});this[_0x4e0a('0x3d')]=(_0x141a6b,_0x4bcefe,_0x3bda69)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]==_0x4e0a('0x33')){this[_0x4e0a('0xd')][_0x4e0a('0x3e')]((_0x5a0694,_0x47a891)=>{if(_0x5a0694){_0x4bcefe['json'](_0x5a0694);}else{_0x4bcefe[_0x4e0a('0x1d')](_0x47a891);}});}else if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]=='postgres'){let _0x35d096=yield this[_0x4e0a('0x18')](this['psql'][_0x4e0a('0x3d')])[_0x4e0a('0x1a')](_0x141a6b,_0x4bcefe,_0x3bda69);if(_0x35d096){if(_0x4bcefe==null)return this['sendAsPromise'](0xc8,_0x35d096);_0x4bcefe['json'](_0x35d096);}else{_0x4bcefe['json'](this[_0x4e0a('0x2e')](0x1f4,'get\x20all\x20records\x20failed'));}}});this[_0x4e0a('0x34')]=(_0x15d6b9,_0x3b7acd,_0x503392)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this['options'][_0x4e0a('0x1e')]=='mongo'){if(_0x3b7acd==null)return _0x15d6b9[this[_0x4e0a('0xc')]];_0x3b7acd['json'](_0x15d6b9[this['name']]);}else if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]==_0x4e0a('0x35')){if(_0x15d6b9[this[_0x4e0a('0xc')]]!=null){if(_0x3b7acd==null)return _0x15d6b9[this[_0x4e0a('0xc')]];_0x3b7acd['json'](this[_0x4e0a('0x12')](0xc8,_0x15d6b9[this[_0x4e0a('0xc')]]));}else if(_0x3b7acd==null){const _0x3061cf=yield this[_0x4e0a('0x18')](this[_0x4e0a('0x36')][_0x4e0a('0x34')])[_0x4e0a('0x1a')](_0x15d6b9,_0x3b7acd,_0x503392);if(_0x3061cf&&_0x3061cf['statusCode']==0x1f4){this[_0x4e0a('0x3a')](0x1f4,_0x3061cf);}else if(_0x3061cf&&_0x3061cf[_0x4e0a('0x17')]==0x0){this['sendAsPromise'](0xc8,_0x4e0a('0x3f')+this[_0x4e0a('0xc')]+_0x4e0a('0x40')+_0x15d6b9[_0x4e0a('0x41')]['id']);}else{this[_0x4e0a('0x3a')](0xc8,_0x3061cf);}}else{_0x3b7acd[_0x4e0a('0x1d')](this['sendError'](0xc9,_0x4e0a('0x3f')+this[_0x4e0a('0xc')]+_0x4e0a('0x40')+_0x15d6b9[_0x4e0a('0x41')]['id']));}}});this[_0x4e0a('0x42')]=(_0x1adbb6,_0x24c023,_0x36cce4)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this['options'][_0x4e0a('0x1e')]==_0x4e0a('0x33')){_0x24c023[_0x4e0a('0x43')](0xc8)[_0x4e0a('0x12')]({'message':_0x4e0a('0x44')});}else if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]=='postgres'){let _0x4aec52=yield this[_0x4e0a('0x18')](this[_0x4e0a('0x36')][_0x4e0a('0x42')])['exec'](_0x1adbb6,_0x24c023,_0x36cce4);if(_0x4aec52){if(_0x24c023==null){_0x4aec52&&_0x4aec52[_0x4e0a('0x17')]>0x0?_0x4aec52[_0x4e0a('0x45')]((_0x55e1d9,_0x471972,_0xc79fd0)=>{this['log'](_0x1adbb6,_0x55e1d9['id'],_0x4e0a('0x46'));}):null;return this['sendAsPromise'](0xc8,_0x4aec52);}_0x24c023[_0x4e0a('0x1d')](this[_0x4e0a('0x12')](0xc8,_0x4aec52&&_0x4aec52[_0x4e0a('0x17')]>0x0?_0x4aec52:[],_0x4aec52['length'],null,'bulk\x20insert\x20success'));}else{if(_0x24c023==null){return this[_0x4e0a('0x3a')](0xc8,_0x4aec52);}_0x24c023['json'](this['sendError'](0x1f5,_0x4e0a('0x47')));}}});this[_0x4e0a('0x2a')]=(_0x308fe3,_0x5334bd,_0x5ee853)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]=='mongo'){this[_0x4e0a('0xd')]['create'](_0x308fe3[_0x4e0a('0x23')],(_0x16bb5b,_0x42f1a8)=>{if(_0x16bb5b){_0x5334bd[_0x4e0a('0x43')](0x1f4)['send'](_0x16bb5b);return![];}else{_0x5334bd['status'](0xc9)[_0x4e0a('0x12')](_0x42f1a8);return _0x42f1a8;}});}else if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]=='postgres'){const _0x40cbac=yield this[_0x4e0a('0x18')](this[_0x4e0a('0x36')][_0x4e0a('0x2a')])[_0x4e0a('0x1a')](_0x308fe3,_0x5334bd,_0x5ee853);if(_0x40cbac){this[_0x4e0a('0xf')](_0x308fe3,_0x40cbac['id'],_0x4e0a('0x46'));if(_0x5334bd==null)return this[_0x4e0a('0x3a')](0xc8,_0x40cbac);_0x5334bd[_0x4e0a('0x43')](0xc9)['send'](_0x40cbac);}else{if(_0x5334bd==null)return this['sendAsPromise'](0xc8,_0x40cbac);_0x5334bd[_0x4e0a('0x1d')](this[_0x4e0a('0x2e')](0x1f5,_0x4e0a('0x47')));}}});this[_0x4e0a('0x2d')]=(_0x1339a9,_0x53711c,_0x365efa)=>__awaiter(this,void 0x0,void 0x0,function*(){let _0x2dbba4=Object[_0x4e0a('0x48')]({},_0x1339a9[_0x4e0a('0x23')]);if(this['options'][_0x4e0a('0x1e')]==_0x4e0a('0x33')){this[_0x4e0a('0xd')][_0x4e0a('0x2d')](_0x2dbba4,(_0x31a9c1,_0x348d6e)=>{if(_0x31a9c1){_0x53711c['status'](0x1f4)[_0x4e0a('0x12')](_0x31a9c1);}else{_0x53711c['json'](_0x2dbba4);}});}else if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]=='postgres'){const _0x1f61c2=yield this['toPromise'](this[_0x4e0a('0x36')][_0x4e0a('0x2d')])['exec'](_0x1339a9,_0x53711c,_0x365efa);if(_0x1f61c2){this[_0x4e0a('0xf')](_0x1339a9,_0x1f61c2['id'],_0x4e0a('0x49'));if(_0x53711c==null)return this[_0x4e0a('0x3a')](0xc8,_0x1f61c2);_0x53711c[_0x4e0a('0x1d')](this[_0x4e0a('0x12')](0xc9,_0x1f61c2,_0x1f61c2[_0x4e0a('0x17')],null,'update\x20success'));}else{if(_0x53711c==null)return this['sendAsPromise'](0xc8,_0x1f61c2);;_0x53711c['json'](this[_0x4e0a('0x2e')](0x1f4,{'message':_0x4e0a('0x4a'),'data':_0x1f61c2}));}}});this[_0x4e0a('0x4b')]=(_0x347c2e,_0x7668a2,_0x2b8600)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]==_0x4e0a('0x33')){_0x347c2e[this[_0x4e0a('0xc')]][_0x4e0a('0x4b')]((_0x53fde0,_0x37016e)=>{if(_0x53fde0){_0x7668a2[_0x4e0a('0x43')](0x1f4)[_0x4e0a('0x12')](_0x53fde0);}else{_0x7668a2['status'](0xc8)[_0x4e0a('0x12')]({'message':'delete\x20success'});}});}else if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]=='postgres'){const _0xb536ae=yield this[_0x4e0a('0x18')](this[_0x4e0a('0x36')][_0x4e0a('0x4c')])[_0x4e0a('0x1a')](_0x347c2e,_0x7668a2,_0x2b8600);if(_0xb536ae){this['log'](_0x347c2e,_0x347c2e[_0x4e0a('0x41')]['id'],'DELETE');if(_0x7668a2==null)return this[_0x4e0a('0x3a')](0xc8,_0xb536ae);_0x7668a2[_0x4e0a('0x1d')](this[_0x4e0a('0x12')](0xc8,[],0x1,null,_0x4e0a('0x4d')));}}});this[_0x4e0a('0x4e')]=(_0x1b0cbe,_0x2f2571,_0x3c8403)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x4e0a('0xb')]['dbType']==_0x4e0a('0x33')){_0x1b0cbe[this['name']]['remove']((_0x4ee538,_0x592c9f)=>{if(_0x4ee538){_0x2f2571[_0x4e0a('0x43')](0x1f4)[_0x4e0a('0x12')](_0x4ee538);}else{_0x2f2571[_0x4e0a('0x43')](0xc8)[_0x4e0a('0x12')]({'message':_0x4e0a('0x4d')});}});}else if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]==_0x4e0a('0x35')){const _0x35e64c=yield this[_0x4e0a('0x18')](this[_0x4e0a('0x36')]['deleteWhere'])[_0x4e0a('0x1a')](_0x1b0cbe,_0x2f2571,_0x3c8403);if(_0x35e64c){this[_0x4e0a('0xf')](_0x1b0cbe,_0x1b0cbe[_0x4e0a('0x23')]['id']!=null?_0x1b0cbe['body']['id']:null,_0x4e0a('0x4f'));if(_0x2f2571==null)return this[_0x4e0a('0x3a')](0xc8,_0x35e64c);_0x2f2571['json'](this[_0x4e0a('0x12')](0xc8,_0x35e64c,_0x35e64c[_0x4e0a('0x17')],null,_0x4e0a('0x4d')));}}});this[_0x4e0a('0x50')]=(_0x5b92bf,_0x2a23bd,_0x2471b2)=>__awaiter(this,void 0x0,void 0x0,function*(){this[_0x4e0a('0x2c')](_0x5b92bf,_0x4e0a('0x2d'));_0x5b92bf[_0x4e0a('0x1f')]==null?_0x5b92bf[_0x4e0a('0x1f')]=this[_0x4e0a('0x51')](this['model']['schema']):null;if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]==_0x4e0a('0x33')){_0x2a23bd['status'](0xc8)[_0x4e0a('0x12')]({'message':_0x4e0a('0x52')});}else if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]==_0x4e0a('0x35')){const _0x553492=yield this[_0x4e0a('0x18')](this[_0x4e0a('0x36')][_0x4e0a('0x50')])[_0x4e0a('0x1a')](_0x5b92bf,_0x2a23bd,_0x2471b2);if(_0x553492){if(_0x2a23bd==null){_0x553492&&_0x553492['length']>0x0?_0x553492[_0x4e0a('0x45')]((_0x57063d,_0x4fb7fc,_0x2a7e35)=>{this[_0x4e0a('0xf')](_0x5b92bf,_0x57063d['id'],_0x4e0a('0x49'));}):null;return this['sendAsPromise'](0xc8,_0x553492);}_0x2a23bd[_0x4e0a('0x1d')](this[_0x4e0a('0x12')](0xc8,_0x553492,_0x553492[_0x4e0a('0x17')],null,_0x4e0a('0x53')));}else{if(_0x2a23bd==null)return this['sendAsPromise'](0xc8,_0x553492);;_0x2a23bd[_0x4e0a('0x1d')](this[_0x4e0a('0x2e')](0xcc,'update\x20failed'));}}});this[_0x4e0a('0x54')]=(_0x3a4bed,_0x86eac7,_0x934b1d)=>{this[_0x4e0a('0x55')](_0x3a4bed[_0x4e0a('0x14')]['id'],_0x3a4bed['body'][_0x4e0a('0x56')],_0x86eac7,_0x934b1d);};this['subscribe']=(_0x3ab7f5,_0x3ec1fd,_0x31e216)=>{const _0x4a0ccc=this[_0x4e0a('0x57')][_0x4e0a('0x58')]('Session')[_0x4e0a('0x59')];const _0x65ffbc=_0x3ab7f5[_0x4e0a('0x23')][_0x4e0a('0x5a')]!=null?_0x3ab7f5[_0x4e0a('0x23')][_0x4e0a('0x5a')]:_0x3ab7f5[_0x4e0a('0x14')]['id'];const _0x2eb0dc=_0x3ab7f5[_0x4e0a('0x23')]['interval']!=null?_0x3ab7f5['body'][_0x4e0a('0x5b')]:0x1388;_0x4a0ccc[_0x4e0a('0x36')][_0x4e0a('0x5c')]({'body':{'get':['*'],'where':{'sid':_0x65ffbc}}},null,null,_0x3bd253=>{let _0x4c12d6=_0x3bd253[0x0][_0x4e0a('0x5d')]['clients']!=null?_0x3bd253[0x0][_0x4e0a('0x5d')][_0x4e0a('0x5e')]:[];let _0x40d620=_0x3ab7f5[_0x4e0a('0x23')]['timestamp']!=null?_0x3ab7f5[_0x4e0a('0x23')]['timestamp']:null;let _0x330d82=_0x3ab7f5[_0x4e0a('0x23')][_0x4e0a('0x56')]!=null?_0x3ab7f5['body']['subscription']:'';let _0x35cab8={},_0x3102f6=![];if(_0x4c12d6!=null&&_0x4c12d6[_0x4e0a('0x17')]==0x0){if(_0x3ab7f5[_0x4e0a('0x23')][_0x4e0a('0x5a')]==null){_0x35cab8['id']=_0x65ffbc;_0x35cab8[_0x4e0a('0x5f')]=[];_0x35cab8[_0x4e0a('0x5f')][_0x4e0a('0x60')]({'name':_0x330d82});_0x4c12d6[_0x4e0a('0x60')](_0x35cab8);_0x3bd253[0x0]['sess'][_0x4e0a('0x5e')]=_0x4c12d6;_0x3102f6=!![];}}else{let _0x3c9ebc=_0x4c12d6[0x0]!=null?_0x4c12d6[0x0][_0x4e0a('0x5f')][_0x4e0a('0x61')](_0x52a1fa=>{return _0x52a1fa[_0x4e0a('0xc')]==_0x330d82;}):-0x1;if(_0x3c9ebc==-0x1){_0x4c12d6[0x0]['subscriptions'][_0x4e0a('0x60')]({'name':_0x330d82});_0x3bd253[0x0][_0x4e0a('0x5d')]['clients'][0x0]=_0x4c12d6[0x0];_0x3102f6=!![];}else{if(_0x3c9ebc!=-0x1&&_0x40d620!=null){this['poll'](_0x65ffbc,_0x330d82,_0x3ab7f5,_0x3ec1fd,_0x31e216);}else{this[_0x4e0a('0x55')](_0x65ffbc,_0x330d82,null,null,(_0x35715f,_0x3bd253)=>{setTimeout(()=>__awaiter(this,void 0x0,void 0x0,function*(){if(_0x3bd253){const _0x3b945b=yield this['toPromise'](this[_0x4e0a('0x36')][_0x4e0a('0x62')])[_0x4e0a('0x1a')](_0x3ab7f5,_0x3ec1fd,_0x31e216);if(_0x3b945b&&_0x3b945b[_0x4e0a('0x17')]>0x0){}_0x3ec1fd[_0x4e0a('0x1d')]({'message':_0x4e0a('0x63'),'data':_0x3b945b,'count':_0x3b945b[_0x4e0a('0x17')],'timestamp':new Date()[_0x4e0a('0x64')](),'method':_0x3ab7f5[_0x4e0a('0x27')],'servedByProcessID':process[_0x4e0a('0x11')],'subscriberID':_0x65ffbc,'subscription':_0x330d82});}}),_0x2eb0dc);});}}}if(_0x3102f6){this['saveSession'](_0x35cab8,{'sess':JSON['stringify'](_0x3bd253[0x0][_0x4e0a('0x5d')]),'where':{'sid':_0x65ffbc}},_0x10106b=>{this[_0x4e0a('0x65')](_0x65ffbc,_0x330d82,_0x3ab7f5,_0x3ec1fd,_0x31e216);});}});};this[_0x4e0a('0x5c')]=(_0x384e0a,_0x4af39c,_0x543ffe)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]=='mongo'){_0x4af39c[_0x4e0a('0x43')](0xc8)[_0x4e0a('0x12')]({'message':'Coming\x20soon.'});}else if(this[_0x4e0a('0xb')][_0x4e0a('0x1e')]==_0x4e0a('0x35')){const _0x26dec7=yield this[_0x4e0a('0x18')](this[_0x4e0a('0x36')][_0x4e0a('0x62')])[_0x4e0a('0x1a')](_0x384e0a,_0x4af39c,_0x543ffe);if(_0x26dec7){if(_0x4af39c==null)return this[_0x4e0a('0x3a')](0xc8,_0x26dec7);const _0x40b977={'body':{'table':this['name']}};const _0x2cbe65=yield this[_0x4e0a('0x66')](_0x40b977,null,null);const _0xcb1eee=_0x2cbe65&&_0x2cbe65[_0x4e0a('0x67')]!=null&&_0x2cbe65['data'][_0x4e0a('0x17')]>0x0&&_0x2cbe65['data'][0x0][_0x4e0a('0x68')]!=null?_0x2cbe65[_0x4e0a('0x67')][0x0][_0x4e0a('0x68')]:0x0;_0x4af39c[_0x4e0a('0x1d')](this[_0x4e0a('0x12')](0xc8,_0x26dec7,_0x26dec7[_0x4e0a('0x17')],parseInt(_0xcb1eee),_0x4e0a('0x69')));}else{_0x4af39c[_0x4e0a('0x1d')](this['sendError'](0xcc,'get\x20failed'));}}});this['getTotalCount']=(_0x487a90,_0x3fd347,_0x16b4bb)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x4e0a('0xb')]['dbType']==_0x4e0a('0x33')){_0x3fd347[_0x4e0a('0x43')](0xc8)[_0x4e0a('0x12')]({'message':_0x4e0a('0x44')});}else if(this[_0x4e0a('0xb')]['dbType']=='postgres'){const _0x3d1332=yield this[_0x4e0a('0x18')](this[_0x4e0a('0x36')]['getTotalCount'])[_0x4e0a('0x1a')](_0x487a90,_0x3fd347,_0x16b4bb);if(_0x3d1332){if(_0x3fd347==null)return this[_0x4e0a('0x3a')](0xc8,_0x3d1332);_0x3fd347['json'](this[_0x4e0a('0x12')](0xc8,{'count':_0x3d1332[0x0][_0x4e0a('0x68')]},_0x3d1332[_0x4e0a('0x17')],parseInt(_0x3d1332[0x0][_0x4e0a('0x68')]),_0x4e0a('0x6a')));}else{_0x3fd347['json'](this[_0x4e0a('0x2e')](0xcc,_0x4e0a('0x6a')));}}});this[_0x4e0a('0x6b')]=(_0x13dd82,_0x6ba2d2,_0x4a4383)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x4e0a('0xb')]['dbType']==_0x4e0a('0x33')){_0x6ba2d2[_0x4e0a('0x43')](0xc8)[_0x4e0a('0x12')]({'message':_0x4e0a('0x44')});}else if(this[_0x4e0a('0xb')]['dbType']==_0x4e0a('0x35')){const _0x52bc25=_0x13dd82['body']['options']!=null?_0x13dd82['body'][_0x4e0a('0xb')]:{};const _0x129747=Object[_0x4e0a('0x6c')](_0x52bc25)[_0x4e0a('0x17')]>0x0&&_0x52bc25[_0x4e0a('0x6d')];const _0x595443=Object[_0x4e0a('0x6c')](_0x52bc25)['length']>0x0&&_0x52bc25['query'];let _0x456653;if(_0x595443){let _0x1b06e5=yield this[_0x4e0a('0x6e')](_0x595443);_0x456653=_0x1b06e5&&_0x1b06e5[_0x4e0a('0x67')]&&_0x1b06e5[_0x4e0a('0x67')][_0x4e0a('0x6f')]&&_0x1b06e5['data'][_0x4e0a('0x6f')][_0x4e0a('0x17')]>0x0?_0x1b06e5['data']['rows'][0x0][_0x4e0a('0x67')]:[];}else{_0x456653=yield this[_0x4e0a('0x18')](this[_0x4e0a('0x36')][_0x4e0a('0x62')])[_0x4e0a('0x1a')](_0x13dd82,_0x6ba2d2,_0x4a4383);}if(_0x456653&&_0x456653['length']>0x0){let _0x238b1e=[];if(_0x6ba2d2==null)return this[_0x4e0a('0x3a')](0xc8,_0x456653);_0x238b1e=this['JSONToRow'](_0x456653);if(_0x129747){_0x238b1e=_0x238b1e[_0x4e0a('0x24')]((_0x1da9b3,_0x10a445,_0x56a67f)=>{Object[_0x4e0a('0x6c')](_0x1da9b3)[_0x4e0a('0x45')](_0x31158c=>{if(_0x31158c['includes']('id')||_0x31158c[_0x4e0a('0x70')](_0x4e0a('0x71'))||_0x31158c[_0x4e0a('0x70')](_0x4e0a('0x72'))){delete _0x1da9b3[_0x31158c];};});return _0x1da9b3;});}let _0x2dd9f7=_0x238b1e[_0x4e0a('0x73')](0x0);let _0x47e171=_0x2dd9f7[_0x4e0a('0x74')]((_0x15c3ea,_0x4aaaad)=>{return Object[_0x4e0a('0x6c')](_0x15c3ea)[_0x4e0a('0x17')]>Object[_0x4e0a('0x6c')](_0x4aaaad)[_0x4e0a('0x17')]?-0x1:0x1;});let _0x30763c=_0x47e171[0x0];let _0x501138=Object[_0x4e0a('0x6c')](_0x30763c);let _0x51b412=_0x238b1e['reduce']((_0x1168e9,_0x53118e,_0x45e07e,_0x3d377e)=>{if(_0x45e07e===0x0)_0x1168e9+='\x0a';Object[_0x4e0a('0x6c')](_0x53118e)[_0x4e0a('0x24')]((_0x23b89a,_0x46f462)=>{if(_0x46f462!==0x0)_0x1168e9+=',';const _0x46f81a=_0x23b89a[_0x4e0a('0x73')](_0x23b89a[_0x4e0a('0x17')]-0x3,_0x23b89a[_0x4e0a('0x17')])===_0x4e0a('0x75')||_0x23b89a[_0x4e0a('0x70')](_0x4e0a('0x76'))&&moment(_0x53118e[_0x23b89a],moment[_0x4e0a('0x77')])[_0x4e0a('0x78')]();if(_0x46f81a&&_0x53118e[_0x23b89a]!==null&&_0x53118e[_0x23b89a]!='-'){_0x53118e[_0x23b89a]=moment(_0x53118e[_0x23b89a])['format']('MM/DD/YYYY');}_0x1168e9+=_0x53118e[_0x23b89a];});return _0x1168e9+'\x0a';},_0x501138);_0x6ba2d2[_0x4e0a('0x43')](0xc8)['send']({'message':_0x4e0a('0x79'),'data':_0x51b412,'filename':this[_0x4e0a('0xc')]+_0x4e0a('0x7a')+moment()[_0x4e0a('0x7b')]('YYYY-MM-DD')+_0x4e0a('0x7c')});}else{_0x6ba2d2['json'](this['sendError'](0x1f4,{'message':_0x4e0a('0x7d')}));}}});this[_0x4e0a('0x7e')]=(_0x32b987,_0xa3d40b,_0x3b4e50)=>{const _0x1bc6c4=_0x32b987[_0x4e0a('0x23')][_0x4e0a('0x7f')]!=null?_0x32b987[_0x4e0a('0x23')]['table']:null;let _0x36b0a4=_0x4e0a('0x80');_0x1bc6c4!=null?_0x36b0a4+=_0x4e0a('0x81')+_0x1bc6c4+_0x4e0a('0x82'):_0x36b0a4+=_0x4e0a('0x83');this[_0x4e0a('0x6e')](_0x36b0a4,(_0x1812e9,_0x83235c)=>{if(!_0x1812e9&&_0x83235c&&_0x83235c['rows'][_0x4e0a('0x17')]>0x0){_0xa3d40b[_0x4e0a('0x1d')](this[_0x4e0a('0x12')](0xc8,_0x83235c[_0x4e0a('0x6f')]));}else{_0xa3d40b[_0x4e0a('0x1d')](this[_0x4e0a('0x2e')](0x1f4,{'message':_0x4e0a('0x84')}));}});};this[_0x4e0a('0x85')]=(_0x1b4ef5,_0x7963d3,_0x3ff79a)=>{const _0x2aacc5=_0x1b4ef5['body'][_0x4e0a('0x7f')]!=null?_0x1b4ef5[_0x4e0a('0x23')][_0x4e0a('0x7f')]:this['name'];const _0x2a390f=_0x4e0a('0x86')+_0x2aacc5+'\x27';this[_0x4e0a('0x6e')](_0x2a390f,(_0x55fecc,_0x4d4b88)=>{if(!_0x55fecc&&_0x4d4b88&&_0x4d4b88['rows']['length']>0x0){_0x7963d3[_0x4e0a('0x1d')](this[_0x4e0a('0x12')](0xc8,_0x4d4b88[_0x4e0a('0x6f')]));}else{_0x7963d3[_0x4e0a('0x1d')](this[_0x4e0a('0x2e')](0x1f4,{'message':'No\x20property\x20found!'}));}});};this[_0x4e0a('0x6e')]=(_0x1a4485,_0x574607)=>__awaiter(this,void 0x0,void 0x0,function*(){if(_0x574607==null){let _0x17ae21=yield this['toPromise'](this['api']['db']['query'])[_0x4e0a('0x1a')](_0x1a4485);return this[_0x4e0a('0x3a')](0xc8,_0x17ae21);}else{this[_0x4e0a('0x57')]['db'][_0x4e0a('0x6e')](_0x1a4485,null,(_0x54f18d,_0x330a1a)=>{if(_0x330a1a){_0x574607(null,_0x330a1a);}else{_0x574607({'errorCode':0x1f4,'errorMessage':_0x54f18d},null);}});}});this[_0x4e0a('0x87')]=()=>{return this[_0x4e0a('0x88')];};this[_0x4e0a('0x2e')]=(_0x49bd3f,_0x2b2c54)=>{return{'errorMessage':_0x2b2c54,'statusCode':_0x49bd3f};};this[_0x4e0a('0x12')]=(_0x333884,_0x483177,_0xbc91d0,_0x543b76,_0x4d222c)=>{const _0x55c2dd={'data':_0x483177,'statusCode':_0x333884};_0x4d222c!=null?_0x55c2dd[_0x4e0a('0x1b')]=_0x4d222c:null;_0xbc91d0!=null?_0x55c2dd[_0x4e0a('0x67')]=_0x483177:null;_0x543b76!=null?_0x55c2dd[_0x4e0a('0x89')]=_0x543b76:null;return _0x55c2dd;};this['setError']=_0xaf2f3c=>{this[_0x4e0a('0x88')][_0x4e0a('0x60')](_0xaf2f3c);};this[_0x4e0a('0x36')]=new postgres_wrapper_1[(_0x4e0a('0x8a'))](this['options'],this[_0x4e0a('0xc')],this[_0x4e0a('0xd')],this['api']);}[_0x4e0a('0x8b')](){return this['random']()+this['random']()+'-'+this[_0x4e0a('0x8c')]()+'-'+this[_0x4e0a('0x8c')]()+'-'+this[_0x4e0a('0x8c')]()+'-'+this[_0x4e0a('0x8c')]()+this[_0x4e0a('0x8c')]()+this[_0x4e0a('0x8c')]();}[_0x4e0a('0x8c')](){return Math['floor']((0x1+Math[_0x4e0a('0x8c')]())*0x10000)[_0x4e0a('0x8d')](0x12)[_0x4e0a('0x8e')](0x1);}[_0x4e0a('0x16')](_0x1d0d47){if(_0x1d0d47[_0x4e0a('0x8f')][_0x4e0a('0x90')]&&_0x1d0d47['headers'][_0x4e0a('0x90')][_0x4e0a('0x91')]('\x20')[0x0]===_0x4e0a('0x92')){return _0x1d0d47[_0x4e0a('0x8f')]['authorization'][_0x4e0a('0x91')]('\x20')[0x1];}else if(_0x1d0d47['query']&&_0x1d0d47[_0x4e0a('0x6e')][_0x4e0a('0x93')]){return _0x1d0d47['query'][_0x4e0a('0x93')];}return null;}[_0x4e0a('0x19')](_0x475704,_0x4cb39b){jwt['verify'](_0x475704,process[_0x4e0a('0x94')][_0x4e0a('0x95')],(_0x9ce230,_0x308e15)=>{_0x9ce230?_0x4cb39b(_0x9ce230,null):_0x4cb39b(null,_0x308e15!=null?_0x308e15:{});});}[_0x4e0a('0xf')](_0x1fcda9,_0x4bc95b,_0x2a406d){return __awaiter(this,void 0x0,void 0x0,function*(){let _0xdf39d={'table_name':this[_0x4e0a('0xc')],'record_id':_0x4bc95b,'user_id':_0x1fcda9[_0x4e0a('0x21')]!=null?_0x1fcda9[_0x4e0a('0x21')]['id']:null,'method':_0x2a406d,'timestamp':new Date()[_0x4e0a('0x64')](),'created_at':'localtimestamp','updated_at':_0x4e0a('0x96'),'created_by':_0x1fcda9[_0x4e0a('0x21')]!=null?_0x1fcda9[_0x4e0a('0x21')][_0x4e0a('0x97')]:'SYS','updated_by':_0x1fcda9[_0x4e0a('0x21')]!=null?_0x1fcda9[_0x4e0a('0x21')]['username']:_0x4e0a('0x98')};const _0x51bfa=this['api'][_0x4e0a('0x58')]('Changelog')[_0x4e0a('0x59')];let _0x604eea=yield this[_0x4e0a('0x18')](_0x51bfa[_0x4e0a('0x36')][_0x4e0a('0x2a')],_0x51bfa[_0x4e0a('0x36')])['exec']({'body':_0xdf39d},null,null);if(_0x604eea){}});}[_0x4e0a('0x99')](_0x7556c5,_0x1fb61d){const _0xc973ee=this['api'][_0x4e0a('0x58')](_0x4e0a('0x9a'))[_0x4e0a('0x59')];const _0x3015cc=this[_0x4e0a('0x57')]['getSchema'](_0x4e0a('0x9b'))[_0x4e0a('0x59')];_0xc973ee[_0x4e0a('0x36')][_0x4e0a('0x5c')]({'body':{'get':[_0x4e0a('0x9c'),'method'],'where':{'table_name':this['name']},'sort':{'timestamp':_0x4e0a('0x9d')},'limit':0x1}},null,null,_0x15ff77=>{_0x3015cc['psql'][_0x4e0a('0x5c')]({'body':{'get':['*'],'where':{'sid':_0x7556c5}}},null,null,_0x2e3ec4=>{_0x1fb61d(_0x15ff77,_0x2e3ec4);});});}[_0x4e0a('0x51')](_0x330fec){let _0x1a0814=0x0;let _0x210db2=[];for(let _0x11340d in _0x330fec){let _0x2b14f5=_0x330fec[_0x11340d];for(let _0x375c19 in _0x2b14f5){if(_0x375c19=='encrypt'&&_0x2b14f5[_0x375c19]==!![]){_0x210db2['push']({'table':this[_0x4e0a('0xc')],'field':_0x11340d});}}}return _0x210db2;}[_0x4e0a('0x20')](){let _0xec850b=[],_0x190674=[];for(let _0x568018 in this[_0x4e0a('0x57')]['models']){_0xec850b[_0x4e0a('0x60')]({'table':this['api'][_0x4e0a('0x9e')][_0x568018][_0x4e0a('0x59')][_0x4e0a('0xc')],'schema':this['api']['models'][_0x568018][_0x4e0a('0x37')]});}let _0x2ed7a2;for(let _0x53e7af in _0xec850b){let _0x4b8746=_0xec850b[_0x53e7af]['schema'],_0x39be50=_0xec850b[_0x53e7af]['table'],_0x2ed7a2=Object['keys'](_0x4b8746);for(let _0x5f2a56 in _0x2ed7a2){let _0xf8c8c0;if(typeof _0x4b8746[_0x2ed7a2[_0x5f2a56]]['encrypt']!='undefined'&&_0x4b8746[_0x2ed7a2[_0x5f2a56]][_0x4e0a('0x9f')]!=null&&_0x4b8746[_0x2ed7a2[_0x5f2a56]][_0x4e0a('0x9f')]==!![]){_0xf8c8c0={'table':_0x39be50,'field':_0x2ed7a2[_0x5f2a56],'encryption':'crypto'};}else if(typeof _0x4b8746[_0x2ed7a2[_0x5f2a56]][_0x4e0a('0xa0')]!='undefined'&&_0x4b8746[_0x2ed7a2[_0x5f2a56]]['bcrypt']!=null&&_0x4b8746[_0x2ed7a2[_0x5f2a56]][_0x4e0a('0xa0')]==!![]){_0xf8c8c0={'table':_0x39be50,'field':_0x2ed7a2[_0x5f2a56],'encryption':_0x4e0a('0xa0')};}else{_0xf8c8c0=null;}if(_0xf8c8c0&&_0x190674[_0x4e0a('0xa1')](_0xf8c8c0)==-0x1){_0x190674[_0x4e0a('0x60')](_0xf8c8c0);}else{}}}return _0x190674;}[_0x4e0a('0x26')](_0x1464df,_0x50ebd3){return _0x1464df[_0x4e0a('0x23')][_0x50ebd3]!=null&&typeof _0x1464df[_0x4e0a('0x23')][_0x50ebd3]!=_0x4e0a('0xa2')?_0x1464df['body'][_0x50ebd3]:_0x1464df['reqUser']!=null&&_0x1464df[_0x4e0a('0x21')][_0x4e0a('0x97')]!=''&&_0x1464df[_0x4e0a('0x21')][_0x4e0a('0x97')]!=null&&typeof _0x1464df['reqUser'][_0x4e0a('0x97')]!=_0x4e0a('0xa2')?_0x1464df[_0x4e0a('0x23')][_0x50ebd3]=_0x1464df[_0x4e0a('0x21')][_0x4e0a('0x97')]:_0x4e0a('0x98');}[_0x4e0a('0x2c')](_0x5d4539,_0x5545da){switch(_0x5545da){case _0x4e0a('0x2d'):_0x5d4539['body'][_0x4e0a('0x28')]=this[_0x4e0a('0x26')](_0x5d4539,_0x4e0a('0x28'));break;case _0x4e0a('0x2a'):_0x5d4539['body']['created_by']=this[_0x4e0a('0x26')](_0x5d4539,'created_by');break;}return _0x5d4539;}[_0x4e0a('0x65')](_0x343868,_0x5ddfe0,_0x3256c6,_0x24a379,_0x1b1ae1){console[_0x4e0a('0xf')](_0x4e0a('0xa3')+_0x5ddfe0+_0x4e0a('0xa4'));let _0x59153d=_0x3256c6[_0x4e0a('0x23')][_0x4e0a('0x9c')]!=null?_0x3256c6[_0x4e0a('0x23')][_0x4e0a('0x9c')]:null,_0x509ada=_0x3256c6[_0x4e0a('0x23')][_0x4e0a('0x5b')]!=null?_0x3256c6[_0x4e0a('0x23')][_0x4e0a('0x5b')]:0x1388;let _0x3816d9=0x0,_0x31b84f=0x1e,_0x5651a3=parseInt(_0x509ada)/0x3e8,_0x520af0=parseInt(_0x31b84f[_0x4e0a('0x8d')]())/parseInt(_0x5651a3['toString']());_0x520af0<0x1?_0x520af0=0x1e:![];let _0x2745be=setInterval(()=>{this['checkForUpdates'](_0x343868,(_0x2956a2,_0x3284d3)=>__awaiter(this,void 0x0,void 0x0,function*(){let _0x1bf662=_0x3284d3&&_0x3284d3[0x0]!=null&&_0x3284d3[0x0][_0x4e0a('0x5d')][_0x4e0a('0x5e')]!=null?_0x3284d3[0x0][_0x4e0a('0x5d')][_0x4e0a('0x5e')]:[];let _0x10d41b=_0x1bf662[0x0];let _0x5e9cf6=_0x2956a2&&_0x2956a2[_0x4e0a('0x17')]>0x0?_0x2956a2[0x0]:{},_0x239a7c=_0x3256c6[_0x4e0a('0x23')][_0x4e0a('0x9c')]==null;_0x59153d==null?_0x59153d=new Date()[_0x4e0a('0x64')]():null;let _0xf1805b=!Object['keys'](_0x5e9cf6)[_0x4e0a('0x17')]?![]:_0x59153d!=_0x5e9cf6[_0x4e0a('0x9c')];let _0x5ca5b0=_0x3816d9>=_0x520af0;console[_0x4e0a('0xf')](_0x4e0a('0xa5'),_0x10d41b[_0x4e0a('0x5f')]);let _0x20a3e0=_0x10d41b&&_0x10d41b[_0x4e0a('0x5f')]['length']>0x0?_0x10d41b['subscriptions'][_0x4e0a('0x61')](_0x5a408c=>{return _0x5a408c[_0x4e0a('0xc')]==_0x5ddfe0;}):-0x1;if(_0x20a3e0==-0x1){clearInterval(_0x2745be);console[_0x4e0a('0xf')]('subscription\x20'+_0x5ddfe0+_0x4e0a('0xa6'));const _0x4402a1=yield this[_0x4e0a('0x18')](this[_0x4e0a('0x36')][_0x4e0a('0x62')])['exec'](_0x3256c6,_0x24a379,_0x1b1ae1);_0x24a379[_0x4e0a('0x1d')]({'message':_0x4e0a('0xa7'),'data':_0x4402a1,'count':_0x4402a1[_0x4e0a('0x17')],'timestamp':null,'method':null,'servedByProcessID':process[_0x4e0a('0x11')],'subscriberID':_0x343868,'subscription':_0x5ddfe0});}else{if(_0xf1805b||_0x5ca5b0){const _0xbb3f57=yield this['toPromise'](this[_0x4e0a('0x36')][_0x4e0a('0x62')])['exec'](_0x3256c6,_0x24a379,_0x1b1ae1);console['log'](_0x4e0a('0xa8'),_0xbb3f57);clearInterval(_0x2745be);_0x24a379[_0x4e0a('0x1d')]({'message':_0x4e0a('0x63'),'data':_0xbb3f57,'count':_0xbb3f57[_0x4e0a('0x17')],'timestamp':_0x20a3e0==-0x1?null:_0xf1805b?_0x5e9cf6[_0x4e0a('0x9c')]:_0x59153d,'method':_0x5ca5b0?null:!_0xf1805b?null:_0x5e9cf6[_0x4e0a('0x27')],'servedByProcessID':process[_0x4e0a('0x11')],'subscriberID':_0x343868,'subscription':_0x5ddfe0});}}}));console[_0x4e0a('0xf')](_0x4e0a('0xa9')+_0x3816d9+':\x20'+_0x5ddfe0+_0x4e0a('0xaa'));_0x3816d9++;},_0x509ada);_0x3256c6['on']('close',()=>{console[_0x4e0a('0xf')]('subscription\x20has\x20closed');clearInterval(_0x2745be);this['removeSessClient'](_0x343868);_0x24a379[_0x4e0a('0xab')]();});}[_0x4e0a('0xac')](_0xb482d3){const _0x161223=this[_0x4e0a('0x57')][_0x4e0a('0x58')](_0x4e0a('0x9b'))[_0x4e0a('0x59')];_0x161223['psql'][_0x4e0a('0x5c')]({'body':{'get':['*'],'where':{'sid':_0xb482d3}}},null,null,_0x105a64=>{_0x105a64[0x0][_0x4e0a('0x5d')][_0x4e0a('0x5e')]!=null?delete _0x105a64[0x0][_0x4e0a('0x5d')]['clients']:null;this[_0x4e0a('0xad')](_0xb482d3,{'sess':JSON['stringify'](_0x105a64[0x0]['sess']),'where':{'sid':_0xb482d3}});});}[_0x4e0a('0xad')](_0x4e6b7d,_0x1a419b,_0x5e0377){const _0x6e5693=this[_0x4e0a('0x57')]['getSchema'](_0x4e0a('0x9b'))[_0x4e0a('0x59')];_0x6e5693['psql'][_0x4e0a('0x50')]({'body':_0x1a419b},null,null,_0x38e957=>{return _0x5e0377?_0x5e0377(_0x38e957):_0x38e957;});}['stopSubscription'](_0x1194ef,_0xd05e3,_0x49e66e,_0x2b99e1,_0x5b7d7a){const _0x1159a1=this['api'][_0x4e0a('0x58')](_0x4e0a('0x9b'))[_0x4e0a('0x59')];_0x1159a1[_0x4e0a('0x36')][_0x4e0a('0x5c')]({'body':{'get':['*'],'where':{'sid':_0x1194ef}}},null,null,_0x1f5464=>{let _0x2d9f3f=_0x1f5464[0x0]['sess'][_0x4e0a('0x5e')]!=null?_0x1f5464[0x0][_0x4e0a('0x5d')][_0x4e0a('0x5e')]:[];if(_0x2d9f3f&&_0x2d9f3f['length']>0x0){let _0x410ee1=_0x2d9f3f[0x0];let _0x5a1241=_0x410ee1[_0x4e0a('0x5f')][_0x4e0a('0x61')](_0x5cc9d4=>{return _0x5cc9d4[_0x4e0a('0xc')]==_0xd05e3;});if(_0x5a1241!=-0x1){let _0x3f28a2=_0x410ee1[_0x4e0a('0x5f')][_0x5a1241];_0x410ee1['subscriptions']=_0x410ee1['subscriptions']['filter'](_0x541a5a=>{return _0x541a5a[_0x4e0a('0xc')]!==_0xd05e3;});_0x1f5464[0x0][_0x4e0a('0x5d')][_0x4e0a('0x5e')][0x0]=_0x410ee1;this['saveSession'](_0x1194ef,{'sess':JSON['stringify'](_0x1f5464[0x0][_0x4e0a('0x5d')]),'where':{'sid':_0x1194ef}},_0x4d23dd=>{const _0x479beb={'message':_0x4e0a('0xae'),'timestamp':null,'method':null,'subscription':_0xd05e3};return _0x49e66e?_0x49e66e[_0x4e0a('0x1d')](_0x479beb):_0x5b7d7a!=null?_0x5b7d7a(null,_0x479beb):_0x479beb;});}else{const _0x49b6c0={'message':'unsubscribe\x20success!\x20no\x20subscription\x20found.','timestamp':null,'method':null,'subscription':_0xd05e3};return _0x49e66e?_0x49e66e[_0x4e0a('0x1d')](_0x49b6c0):_0x5b7d7a!=null?_0x5b7d7a(null,_0x49b6c0):_0x49b6c0;}}else{const _0x491ca1={'message':_0x4e0a('0xaf'),'timestamp':null,'method':null,'subscription':_0xd05e3};return _0x49e66e?_0x49e66e[_0x4e0a('0x1d')](_0x491ca1):_0x5b7d7a!=null?_0x5b7d7a(_0x491ca1,null):_0x491ca1;}});}['getJSONModels'](_0x2e7689,_0x277d4a){Object[_0x4e0a('0x6c')](_0x2e7689)[_0x4e0a('0x45')](_0x5c4517=>{if(Array[_0x4e0a('0xb0')](_0x2e7689[_0x5c4517])){for(let _0x572c4d in _0x2e7689[_0x5c4517]){const _0x388f82=_0x2e7689[_0x5c4517][_0x572c4d];if(_0x388f82&&typeof _0x388f82!=_0x4e0a('0xb1')&&Object[_0x4e0a('0x6c')](_0x388f82)['length']>0x0){_0x277d4a[_0x5c4517]=_0x277d4a[_0x5c4517]!=null?_0x277d4a[_0x5c4517]:_0x388f82;for(let _0x19f9f0 in _0x388f82){if(Array['isArray'](_0x388f82[_0x19f9f0])){}}}}}});return _0x277d4a;}[_0x4e0a('0xb2')](_0x5874ea,_0x4064b){let _0x423826={};return _0x5874ea[_0x4e0a('0x24')]((_0x1b7148,_0x32609d,_0x1a7a29)=>{_0x423826=this[_0x4e0a('0xb3')](_0x1b7148,_0x423826);Object['keys'](_0x1b7148)[_0x4e0a('0x45')]((_0xcfb5e2,_0x32609d,_0x1a7a29)=>{if(_0xcfb5e2!==null){if(Array[_0x4e0a('0xb0')](_0x1b7148[_0xcfb5e2])){for(let _0x32609d in _0x1b7148[_0xcfb5e2]){const _0x227a16=_0x1b7148[_0xcfb5e2][_0x32609d];if(_0x227a16&&typeof _0x227a16!=_0x4e0a('0xb1')&&Object[_0x4e0a('0x6c')](_0x227a16)['length']>0x0){for(let _0x5b50c2 in _0x227a16){if(Array['isArray'](_0x227a16[_0x5b50c2])){}_0x1b7148[_0xcfb5e2+'.'+_0x5b50c2+'_'+_0x32609d]=this[_0x4e0a('0xb4')](_0x227a16[_0x5b50c2]);}}else{for(let _0x330577 in _0x423826[_0xcfb5e2]){_0x1b7148[_0xcfb5e2+'.'+_0x330577+'_'+_0x32609d]='-';}}}delete _0x1b7148[_0xcfb5e2];}else if(_0x1b7148[_0xcfb5e2]&&typeof _0x1b7148[_0xcfb5e2]!=_0x4e0a('0xb1')&&Object[_0x4e0a('0x6c')](_0x1b7148[_0xcfb5e2])[_0x4e0a('0x17')]>0x0){for(let _0x3008f7 in _0x1b7148[_0xcfb5e2]){_0x1b7148[_0xcfb5e2+'.'+_0x3008f7]=this[_0x4e0a('0xb4')](_0x1b7148[_0xcfb5e2][_0x3008f7]);}delete _0x1b7148[_0xcfb5e2];}else{_0x1b7148[_0xcfb5e2]=this['escape'](_0x1b7148[_0xcfb5e2]);}}else{_0x1b7148[_0xcfb5e2]='-';}});return _0x1b7148;});}['escape'](_0x6a3061){let _0x7b1863;let _0x597e95;if(_0x6a3061!=null){_0x7b1863=_0x6a3061[_0x4e0a('0x8d')]();typeof _0x6a3061==_0x4e0a('0xb1')?_0x597e95=moment(_0x7b1863,moment[_0x4e0a('0x77')])[_0x4e0a('0x78')]():![];if(!_0x597e95){_0x7b1863=_0x7b1863['includes'](',')?'\x22'+_0x7b1863+'\x22'['trim']():_0x6a3061;}else{return _0x6a3061;}}else{_0x7b1863='-';}return _0x7b1863;}[_0x4e0a('0x3a')](_0x10c104,_0xcf64a){return new Promise(_0x1211a5=>{_0x1211a5(this[_0x4e0a('0x12')](_0x10c104,_0xcf64a));});}[_0x4e0a('0x18')](_0x464cf3,_0x462d61){const _0xc1d6f9=(..._0x356ad2)=>{return new Promise((_0x1c7e29,_0x58f965)=>{const _0x2bebf5=(_0x17b114,_0x2206d3)=>{_0x2206d3&&_0x2206d3!=null?_0x17b114?_0x58f965(_0x17b114):_0x1c7e29(_0x2206d3):_0x1c7e29(_0x17b114);};_0x464cf3['apply'](_0x462d61!=null?_0x462d61:this['psql'],[..._0x356ad2,_0x2bebf5]);});};_0xc1d6f9[_0x4e0a('0x1a')]=(..._0xeb087)=>{return _0xc1d6f9(..._0xeb087);};return _0xc1d6f9;}static[_0x4e0a('0xb5')](_0x35b1d1){let _0x3ebfb0=_0x35b1d1||null;let _0x4b76d3;if(_0x3ebfb0!=null){_0x4b76d3=_0x3ebfb0[_0x4e0a('0x73')](0x0,_0x3ebfb0[_0x4e0a('0xa1')]('T'));}return _0x4b76d3;}}exports[_0x4e0a('0xb6')]=BaseController;