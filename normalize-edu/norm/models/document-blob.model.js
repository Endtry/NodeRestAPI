var _0x4dfa=['getAll','you\x20might\x20not\x20want\x20to\x20do\x20this!!','findById','params','ASC','get','blob','sendAsPromise','sendError','There\x20was\x20an\x20error\x20processing\x20request!','extend','GET','POST','/id/:id','sanitize','toString','replace','trim','includes','generateID','random','floor','substring','match','next','throw','done','value','then','defineProperty','__esModule','./base.model','BaseModel','A\x20numeric\x20property\x20used\x20to\x20identify\x20${name}\x20record.','foreign','Document','cascade','A\x20table\x20used\x20to\x20store\x20document\x20blob','options','name','insert','dbType','mongo','json','controller','send','postgres','body','base64','chunkString','doc_guid','postfix','assign','model','bulkInsert','data','length','status','There\x20was\x20an\x20error\x20while\x20saving\x20file!'];(function(_0x59172f,_0x69720a){var _0x20b939=function(_0x91d5f8){while(--_0x91d5f8){_0x59172f['push'](_0x59172f['shift']());}};_0x20b939(++_0x69720a);}(_0x4dfa,0x1f0));var _0x2dbd=function(_0x302b41,_0x2e29bc){_0x302b41=_0x302b41-0x0;var _0x57f080=_0x4dfa[_0x302b41];return _0x57f080;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x5a5baa,_0x43280f,_0x443536,_0xbc06d0){return new(_0x443536||(_0x443536=Promise))(function(_0x1280ef,_0x341c1c){function _0x4f6e13(_0x44c6a3){try{_0x44a110(_0xbc06d0[_0x2dbd('0x0')](_0x44c6a3));}catch(_0x15ebd8){_0x341c1c(_0x15ebd8);}}function _0x252754(_0x420df0){try{_0x44a110(_0xbc06d0[_0x2dbd('0x1')](_0x420df0));}catch(_0xd51847){_0x341c1c(_0xd51847);}}function _0x44a110(_0x19bdca){_0x19bdca[_0x2dbd('0x2')]?_0x1280ef(_0x19bdca[_0x2dbd('0x3')]):new _0x443536(function(_0x1280ef){_0x1280ef(_0x19bdca['value']);})[_0x2dbd('0x4')](_0x4f6e13,_0x252754);}_0x44a110((_0xbc06d0=_0xbc06d0['apply'](_0x5a5baa,_0x43280f||[]))[_0x2dbd('0x0')]());});};Object[_0x2dbd('0x5')](exports,_0x2dbd('0x6'),{'value':!![]});const base_model_1=require(_0x2dbd('0x7'));class DocumentBlob extends base_model_1[_0x2dbd('0x8')]{constructor(_0xf18d8e,_0x200e3d,_0x5d718b){super(_0xf18d8e,_0x200e3d,{'id':{'type':Number,'key':'primary','desc':_0x2dbd('0x9'),'nice_name':''},'app_id':{'type':Number,'desc':'','nice_name':''},'path':{'type':String,'maxlength':0x32,'desc':'','nice_name':''},'blob':{'type':String,'maxlength':0xc350,'encrypt':!![],'desc':'','nice_name':''},'prefix':{'type':String,'maxlength':0x1e,'desc':'','nice_name':''},'postfix':{'type':String,'maxlength':0x1e,'desc':'','nice_name':''},'size':{'type':Number,'desc':'','nice_name':''},'sequence':{'type':Number,'desc':'','nice_name':''},'doc_guid':{'type':String,'maxlength':0x1f4,'key':_0x2dbd('0xa'),'references':{'table':_0x2dbd('0xb'),'foreignKey':'file'},'onDelete':_0x2dbd('0xc'),'onUpdate':_0x2dbd('0xc'),'desc':'','nice_name':''}},_0x2dbd('0xd'),[],_0x5d718b);this[_0x2dbd('0xe')]=_0xf18d8e;this[_0x2dbd('0xf')]=_0x200e3d;this['api']=_0x5d718b;this[_0x2dbd('0x10')]=(_0x1d8bb4,_0x5e5110,_0x14e367)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x2dbd('0xe')][_0x2dbd('0x11')]==_0x2dbd('0x12')){_0x5e5110[_0x2dbd('0x13')](this['model'][_0x2dbd('0x14')][_0x2dbd('0x15')](0xc8,{'message':'Comming\x20soon!'}));}else if(this[_0x2dbd('0xe')][_0x2dbd('0x11')]==_0x2dbd('0x16')){const _0x3edfe6=_0x1d8bb4[_0x2dbd('0x17')];const _0x579c18=_0x3edfe6[_0x2dbd('0x18')];const _0x237444=this[_0x2dbd('0x19')](_0x579c18,0x2710);let _0x171dd7=_0x237444['map']((_0x3b793c,_0x5e9d25,_0x3ee33a)=>{let _0x3ec055={'blob':_0x3b793c,'sequence':_0x5e9d25,'doc_guid':_0x3edfe6[_0x2dbd('0x1a')],'postfix':_0x3edfe6[_0x2dbd('0x1b')]};return _0x3ec055;});const _0x1af324=Object[_0x2dbd('0x1c')](_0x1d8bb4,{'body':_0x171dd7});const _0x20d8cc=yield this[_0x2dbd('0x1d')][_0x2dbd('0x14')][_0x2dbd('0x1e')](_0x1af324,null,null);if(_0x20d8cc&&_0x20d8cc['data']&&_0x20d8cc[_0x2dbd('0x1f')][_0x2dbd('0x20')]>0x0){_0x5e5110[_0x2dbd('0x21')](0xc8)[_0x2dbd('0x15')]({'doc_id':_0x3edfe6['doc_guid']});}else{_0x5e5110[_0x2dbd('0x21')](0x1f4)['send']({'message':_0x2dbd('0x22')});}}});this[_0x2dbd('0x23')]=(_0x399107,_0x26f3a1,_0xc63715)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this['options'][_0x2dbd('0x11')]==_0x2dbd('0x12')){_0x26f3a1[_0x2dbd('0x13')](this[_0x2dbd('0x1d')][_0x2dbd('0x14')]['send'](0xc8,{'message':_0x2dbd('0x24')}));}else if(this[_0x2dbd('0xe')]['dbType']==_0x2dbd('0x16')){_0x26f3a1[_0x2dbd('0x13')](this['model'][_0x2dbd('0x14')]['send'](0xc8,{'message':'you\x20might\x20not\x20want\x20to\x20do\x20this!!'}));}});this[_0x2dbd('0x25')]=(_0x23850a,_0x1b5e8a,_0x4c4bfd)=>__awaiter(this,void 0x0,void 0x0,function*(){if(this[_0x2dbd('0xe')][_0x2dbd('0x11')]==_0x2dbd('0x12')){_0x1b5e8a[_0x2dbd('0x13')](_0x23850a[this[_0x2dbd('0xf')]]);}else if(this[_0x2dbd('0xe')]['dbType']=='postgres'){const _0x14d067=_0x23850a[_0x2dbd('0x26')]['id'];const _0x471841=Object[_0x2dbd('0x1c')](_0x23850a,{'body':{'get':['*'],'where':{'doc_guid':_0x14d067},'sort':{'sequence':_0x2dbd('0x27')}}});const _0x772d40=yield this[_0x2dbd('0x1d')][_0x2dbd('0x14')][_0x2dbd('0x28')](_0x471841,null,null);let _0x2b56ee='';if(_0x772d40&&_0x772d40[_0x2dbd('0x1f')]&&_0x772d40['data']['length']>0x0){const _0x52c8ef=_0x772d40[_0x2dbd('0x1f')];for(let _0x3e518a in _0x52c8ef){_0x2b56ee+=_0x52c8ef[_0x3e518a][_0x2dbd('0x29')];}const _0xddc85={'blob':_0x2b56ee,'postfix':_0x52c8ef[0x0][_0x2dbd('0x1b')],'size':_0x52c8ef[0x0]['size']};if(_0x1b5e8a==null){return this[_0x2dbd('0x1d')][_0x2dbd('0x14')][_0x2dbd('0x2a')](0x1f4,_0xddc85);}else{_0x1b5e8a[_0x2dbd('0x13')](this[_0x2dbd('0x1d')]['controller'][_0x2dbd('0x15')](0xc8,_0xddc85));}}else{if(_0x1b5e8a==null){return this[_0x2dbd('0x1d')][_0x2dbd('0x14')][_0x2dbd('0x2a')](0x1f4,'There\x20was\x20an\x20error\x20processing\x20request!');}else{_0x1b5e8a[_0x2dbd('0x13')](this[_0x2dbd('0x1d')]['controller'][_0x2dbd('0x2b')](0x1f4,_0x2dbd('0x2c')));}}}});this[_0x2dbd('0x1d')]['router'][_0x2dbd('0x2d')]('/',_0x2dbd('0x2e'),this[_0x2dbd('0x23')]);this['model']['router'][_0x2dbd('0x2d')]('/',_0x2dbd('0x2f'),this['insert']);this[_0x2dbd('0x1d')]['router'][_0x2dbd('0x2d')](_0x2dbd('0x30'),_0x2dbd('0x2e'),this[_0x2dbd('0x25')]);this[_0x2dbd('0x1d')][_0x2dbd('0x14')][_0x2dbd('0x10')]=this[_0x2dbd('0x10')];this[_0x2dbd('0x1d')][_0x2dbd('0x14')]['getAll']=this[_0x2dbd('0x23')];this[_0x2dbd('0x1d')][_0x2dbd('0x14')][_0x2dbd('0x25')]=this['findById'];}static[_0x2dbd('0x31')](_0x5abd2d){let _0x4538b9=_0x5abd2d[_0x2dbd('0x32')]()[_0x2dbd('0x33')](/(^\s+|\s+$)/g,'')[_0x2dbd('0x34')]();if(_0x4538b9[_0x2dbd('0x35')]('\x27')){_0x4538b9=_0x4538b9[_0x2dbd('0x33')](/'/g,'\x27\x27');}return _0x4538b9;}[_0x2dbd('0x36')](){return this[_0x2dbd('0x37')]()+this[_0x2dbd('0x37')]()+'-'+this[_0x2dbd('0x37')]()+'-'+this[_0x2dbd('0x37')]()+'-'+this['random']()+'-'+this['random']()+this[_0x2dbd('0x37')]()+this[_0x2dbd('0x37')]();}['random'](){return Math[_0x2dbd('0x38')]((0x1+Math[_0x2dbd('0x37')]())*0x10000)[_0x2dbd('0x32')](0x12)[_0x2dbd('0x39')](0x1);}[_0x2dbd('0x19')](_0x2b72f1,_0x138cf2){return _0x2b72f1[_0x2dbd('0x3a')](new RegExp('.{1,'+_0x138cf2+'}','g'));}}exports['DocumentBlob']=DocumentBlob;