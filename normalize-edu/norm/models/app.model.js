var _0x275d=['.jpg','.gif','data:','blob','getAll','model','controller','get','getApi','length','appOptions','bg_logo','sm_logo','option_value','assign','all','json','body','hash','api_secret','cluster','primary','api_prefix','/api/v1','environment','db_type','postgres','/seed','development','app_name','env','DB_NAME','DB_PORT','api_key_id','ready','../models','bootstrap','spawn','Failed\x20to\x20spin\x20up\x20new\x20application\x20instance!','route','POST','/tennant','App','__awaiter','next','throw','done','value','then','apply','defineProperty','__esModule','./base.model','../normalize','BaseModel','options','name','getLogo','api','getSchema','DocumentBlob','findById','data','postfix','split','.png'];(function(_0x146024,_0xf0c24a){var _0x18a50d=function(_0x167550){while(--_0x167550){_0x146024['push'](_0x146024['shift']());}};_0x18a50d(++_0xf0c24a);}(_0x275d,0xf1));var _0xe6e6=function(_0x5d6107,_0x2d0d32){_0x5d6107=_0x5d6107-0x0;var _0x2f62db=_0x275d[_0x5d6107];return _0x2f62db;};'use strict';/*
    Required.
*/var __awaiter=this&&this[_0xe6e6('0x0')]||function(_0x420fb5,_0x4a7f28,_0x3e1853,_0x483ca6){return new(_0x3e1853||(_0x3e1853=Promise))(function(_0x4c23fc,_0x5734df){function _0x2851fc(_0x5656fb){try{_0x102f3e(_0x483ca6[_0xe6e6('0x1')](_0x5656fb));}catch(_0x2d2ac3){_0x5734df(_0x2d2ac3);}}function _0x538cd2(_0x5b69e6){try{_0x102f3e(_0x483ca6[_0xe6e6('0x2')](_0x5b69e6));}catch(_0x1207f2){_0x5734df(_0x1207f2);}}function _0x102f3e(_0x5e5f38){_0x5e5f38[_0xe6e6('0x3')]?_0x4c23fc(_0x5e5f38[_0xe6e6('0x4')]):new _0x3e1853(function(_0x4c23fc){_0x4c23fc(_0x5e5f38[_0xe6e6('0x4')]);})[_0xe6e6('0x5')](_0x2851fc,_0x538cd2);}_0x102f3e((_0x483ca6=_0x483ca6[_0xe6e6('0x6')](_0x420fb5,_0x4a7f28||[]))[_0xe6e6('0x1')]());});};Object[_0xe6e6('0x7')](exports,_0xe6e6('0x8'),{'value':!![]});const base_model_1=require(_0xe6e6('0x9'));const normalize_1=require(_0xe6e6('0xa'));class App extends base_model_1[_0xe6e6('0xb')]{constructor(_0x4f4736,_0x309758,_0x307a7b){super(_0x4f4736,_0x309758,{'id':{'type':Number,'key':'primary'},'app_name':{'type':String,'maxlength':0x18,'unique':!![]},'url':{'type':String,'maxlength':0xc8},'port':{'type':Number,'unique':!![]},'version':{'type':String,'maxlength':0xa},'api_prefix':{'type':String,'maxlength':0xa},'environment':{'type':String,'maxlength':0x18},'db_type':{'type':String,'maxlength':0x18},'cluster':{'type':Boolean,'default':![]},'primary':{'type':Boolean,'default':![]},'api_key_id':{'type':String,'maxlength':0x1f4},'api_secret':{'type':String,'maxlength':0x1f4},'options':{'type':JSON}},'',[],_0x307a7b);this[_0xe6e6('0xc')]=_0x4f4736;this[_0xe6e6('0xd')]=_0x309758;this['api']=_0x307a7b;this[_0xe6e6('0xe')]=(_0x122ff0,_0x6a1744,_0x1102d6)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x1c6710=this[_0xe6e6('0xf')][_0xe6e6('0x10')](_0xe6e6('0x11'))['controller'];let _0x54d531=yield _0x1c6710[_0xe6e6('0x12')](_0x122ff0,null,null);if(_0x54d531[_0xe6e6('0x13')]){let _0x252e9f=_0x54d531[_0xe6e6('0x13')][_0xe6e6('0x14')][_0xe6e6('0x15')]('.')[0x1];if(_0x54d531[_0xe6e6('0x13')]['postfix']==_0xe6e6('0x16')||_0x54d531[_0xe6e6('0x13')]['postfix']==_0xe6e6('0x17')||_0x54d531['data'][_0xe6e6('0x14')]=='.jpeg'||_0x54d531[_0xe6e6('0x13')][_0xe6e6('0x14')]==_0xe6e6('0x18')||_0x54d531[_0xe6e6('0x13')][_0xe6e6('0x14')]=='.svg+xml'){let _0x4c91e7='image/'+_0x252e9f;return _0xe6e6('0x19')+_0x4c91e7+';base64,'+_0x54d531[_0xe6e6('0x13')][_0xe6e6('0x1a')];}}else{return null;}});this[_0xe6e6('0x1b')]=(_0x20c798,_0x12add1,_0x462472)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x4e504c=yield this[_0xe6e6('0x1c')][_0xe6e6('0x1d')][_0xe6e6('0x1e')](_0x20c798,_0x12add1,_0x462472);});this[_0xe6e6('0x1f')]=(_0xe8dafd,_0x3f5033,_0x3e00bc)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x122422=yield this[_0xe6e6('0x1c')][_0xe6e6('0x1d')][_0xe6e6('0x1e')](_0xe8dafd,null,null);let _0x343ff5=_0x122422&&_0x122422[_0xe6e6('0x13')]&&_0x122422['data'][_0xe6e6('0x20')]>0x0&&_0x122422[_0xe6e6('0x13')][0x0]['appOptions']&&_0x122422[_0xe6e6('0x13')][0x0][_0xe6e6('0x21')][_0xe6e6('0x20')]>0x0?_0x122422[_0xe6e6('0x13')][0x0][_0xe6e6('0x21')]:[];let _0x527851={};let _0x4f4736=_0x343ff5[_0xe6e6('0x20')]>0x0?_0x343ff5['map']((_0x3bb8d0,_0xcfeaa6,_0x31fcc5)=>__awaiter(this,void 0x0,void 0x0,function*(){if(_0x3bb8d0['option_key']==_0xe6e6('0x22')||_0x3bb8d0['option_key']==_0xe6e6('0x23')){let _0x5dd843=_0x3bb8d0[_0xe6e6('0x24')];let _0x53d5c1={'params':{'id':_0x5dd843}};let _0x7db1f0=yield this[_0xe6e6('0xe')](_0x53d5c1,null,null);_0x527851[_0xe6e6('0x24')]=_0x7db1f0;}_0x3bb8d0=Object[_0xe6e6('0x25')](_0x3bb8d0,_0x527851);return _0x3bb8d0;})):[];let _0x109ae9=yield Promise[_0xe6e6('0x26')](_0x4f4736);_0x122422[_0xe6e6('0x13')][_0xe6e6('0x21')]=_0x4f4736;_0x3f5033[_0xe6e6('0x27')](_0x122422);});this['createApi']=(_0x5077a9,_0x49139d,_0x1138d5)=>__awaiter(this,void 0x0,void 0x0,function*(){_0x5077a9[_0xe6e6('0x28')]['api_key_id']=this[_0xe6e6('0x1c')]['controller'][_0xe6e6('0x29')]();_0x5077a9[_0xe6e6('0x28')][_0xe6e6('0x2a')]=this[_0xe6e6('0x1c')][_0xe6e6('0x1d')]['hash']();_0x5077a9[_0xe6e6('0x28')]['cluster']=_0x5077a9['body'][_0xe6e6('0x2b')]!=null?_0x5077a9[_0xe6e6('0x28')]['cluster']:![];_0x5077a9['body'][_0xe6e6('0x2c')]=_0x5077a9[_0xe6e6('0x28')][_0xe6e6('0x2c')]!=null?_0x5077a9[_0xe6e6('0x28')][_0xe6e6('0x2c')]:![];_0x5077a9[_0xe6e6('0x28')]['api_prefix']=_0x5077a9[_0xe6e6('0x28')][_0xe6e6('0x2d')]!=null?_0x5077a9[_0xe6e6('0x28')][_0xe6e6('0x2d')]:_0xe6e6('0x2e');_0x5077a9['body'][_0xe6e6('0x2f')]=_0x5077a9[_0xe6e6('0x28')][_0xe6e6('0x2f')]!=null?_0x5077a9[_0xe6e6('0x28')]['environment']:'development';_0x5077a9[_0xe6e6('0x28')]['db_type']=_0x5077a9['body'][_0xe6e6('0x30')]!=null?_0x5077a9[_0xe6e6('0x28')]['db_type']:_0xe6e6('0x31');const _0x4f4736=_0x5077a9[_0xe6e6('0x28')];let _0x2f2f1b={'cluster':_0x4f4736['cluster']||![],'seedDir':_0xe6e6('0x32'),'port':parseInt(_0x4f4736['port']),'routePrefix':_0x4f4736[_0xe6e6('0x2d')]||_0xe6e6('0x2e'),'environment':_0x4f4736[_0xe6e6('0x2f')]||_0xe6e6('0x33'),'dbType':_0x4f4736[_0xe6e6('0x30')]||_0xe6e6('0x31'),'dbName':_0x4f4736[_0xe6e6('0x34')]+'_'+process[_0xe6e6('0x35')][_0xe6e6('0x36')],'dbUser':process[_0xe6e6('0x35')]['DB_USER'],'dbPassword':process[_0xe6e6('0x35')]['DB_PASS'],'dbHost':process[_0xe6e6('0x35')]['DB_HOST'],'dbPort':process[_0xe6e6('0x35')][_0xe6e6('0x37')],'api_key_id':_0x4f4736[_0xe6e6('0x38')],'api_secret':_0x4f4736[_0xe6e6('0x2a')]};_0x5077a9[_0xe6e6('0x28')][_0xe6e6('0xc')]=Object[_0xe6e6('0x25')]({},_0x2f2f1b);const _0x88e4ba=yield this['model']['controller']['insert'](_0x5077a9,null,null);if(_0x88e4ba){let _0x13211d=new normalize_1['Normalize'](_0x2f2f1b,{});_0x13211d[_0xe6e6('0x39')](_0x4e69a2=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x490e01=require(_0xe6e6('0x3a'));let _0x2ee715=yield _0x4e69a2[_0xe6e6('0x3b')](_0x490e01,![]);if(_0x2ee715){_0x49139d['json'](_0x88e4ba);_0x4e69a2[_0xe6e6('0x3c')]();}else{_0x49139d[_0xe6e6('0x27')](this[_0xe6e6('0x1c')][_0xe6e6('0x1d')]['sendError'](0x1f4,_0xe6e6('0x3d')));}}));}});this[_0xe6e6('0x3e')]('/',_0xe6e6('0x3f'),this['createApi'],!![]);this[_0xe6e6('0x3e')](_0xe6e6('0x40'),_0xe6e6('0x3f'),this[_0xe6e6('0x1f')],![]);this[_0xe6e6('0x3e')]('/get',_0xe6e6('0x3f'),this[_0xe6e6('0x1b')],![]);}}exports[_0xe6e6('0x41')]=App;